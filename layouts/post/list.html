{{ define "main" }}
{{ $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
<div class="container">
    <h1>Archives</h1>
    <span><b>{{ len $pages }}</b> articles.</span>
    {{ range $pages.GroupByDate "2006" -}}
    <section>
      <h2>{{ .Key }}</h2>
      {{ range .Pages.GroupByDate "January"}}
      <h3>{{ .Key }}</h3>
      <ul>
        {{ range .Pages  -}}
        <li><time>{{ .Date.Format "02"}}</time> | {{ partial "post-stub.html" . -}}</li>
        {{- end }}
      </ul>
      {{ end }}
    </section>
    {{ end }}
</div>
{{ end }}
